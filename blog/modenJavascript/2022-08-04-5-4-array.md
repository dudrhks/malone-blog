---
slug:  modern-javascript-5-4
title: (모던 자바스크립트) 5-4 배열
authors: malone
tags: [Javascript, Modern Javascript]
keywords: [javascript, array, 배열, 모던 자바스크립트]
---
<br/>
> 순서가 있는 컬렉션을 저장할 때 쓰는 자료구조가 필요할때 배열을 사용한다
> 

## 배열선언

```jsx
let arr = new Array();
let arr = [];
```

대부분 두 번째 방법으로 배열을 선언하는데, 이때 대괄호 안에 초기 요소를 넣어주는것도 가능하다

```jsx
let fruits = ["사과", "오렌지", "자두"];
```

각 배열 요소엔 0부터 시작하는 숫자(인덱스)가 매겨져 있다. 이 숫자들은 배열 내 순서를 나타낸다. 배열 내 특정 요소를 얻고 싶다면 대괄호 안에 순서를 나타내는 숫자인 인덱스를 넣어준다

```jsx
let fruits = ["사과", "오렌지", "자두"];

alert( fruits[0] ); // 사과
alert( fruits[1] ); // 오렌지
alert( fruits[2] ); // 자두
```

같은 방법으로 요소를 수정할수 있다

```jsx
fruits[2] = '배'; // 배열이 ["사과", "오렌지", "배"]로 바뀜
```

새로운 요소를 배열에 추가하는 것도 가능하다

```jsx
fruits[3] = '레몬'; // 배열이 ["사과", "오렌지", "배", "레몬"]으로 바뀜
```

length를 사용하면 배열에 담긴 요소가 몇 개인지 알수 있다

```jsx
let fruits = ["사과", "오렌지", "자두"];

alert( fruits.length ); // 3
```

`alert`를 사용해 요소 전체를 출력하는 것도 가능합니다.

```jsx
let fruits = ["사과", "오렌지", "자두"];

alert( fruits ); // 사과,오렌지,자두
```

배열 요소의 자료형엔 제약이 없다

```jsx
// 요소에 여러 가지 자료형이 섞여 있습니다.
let arr = [ '사과', { name: 'Jhon' }, true, function() { alert('안녕하세요.'); } ];

// 인덱스가 1인 요소(객체)의 name 프로퍼티를 출력합니다.
alert( arr[1].name ); // 이보라

// 인덱스가 3인 요소(함수)를 실행합니다.
arr[3](); // 안녕하세요.
```

## pop·push와 shift·unshift

큐(queue)는 배열을 사용해 만들 수 있는 대표적인 자료구조로, 배열과 마찬가지로 순서가 있는 컬렉션을 저장하는데 사용한다

- `push` : 맨 끝에 요소를 추가한다
- `shift` : 제일 앞 요소를 꺼내 제거한 후 남아있는 요소들을 앞으로 밀어준다. 이렇게 하면 두 번째 요소가 첫 번째 요소가 된다

배열엔 스택이라 불리는 자료구조를 구현하는 두 연산을 가능케 해주는 내장 메서드 `push` 와 `pop`이 있다.

스택에서 사용하는 연산은 아래와 같다

- `push` : 요소를 스택 끝에 집어넣는다
- `pop` : 스택 끝 요소 추출한다

스택은 이처럼 ‘한쪽 끝’에 요소를 더하거나 뺄 수 있게 해주는 자료구조이다

`pop`

배열 끝 요소를 제거하고, 제거한 요소를 반환한다

```jsx
let fruits = ["사과", "오렌지", "배"];

alert( fruits.pop() ); // 배열에서 "배"를 제거하고 제거된 요소를 얼럿창에 띄운다

alert( fruits ); // 사과, 오첸지
```

`push`

배열 끝에 요소를 추가한다

```jsx
let fruits = ["사과", "오렌지"];

fruits.push("배");

alert( fruits ); // 사과, 오렌지, 배
```

`fruits.push(...)`를 호출하는 것은 `fruits[fruits.length] = ...`하는 것과 같다

`shift`

배열 앞 요소를 제거하고, 제거한 요소를 반환한다

```jsx
let fruits = ["사과", "오렌지", "배"];

alert( fruits.shift() ); // 배열에서 "사과"를 제거하고 제거된 요소를 얼럿창에 띄웁니다.

alert( fruits ); // 오렌지,배
```

`unshift`

배열 앞에 요소를 추가한다

```jsx
let fruits = ["오렌지", "배"];

fruits.unshift('사과');

alert( fruits ); // 사과,오렌지,배
```

`push`와 `unshift`는 요소 여러 개를 한 번에 더해줄 수 있다

```jsx
let fruits = ["사과"];

fruits.push("오렌지", "배");
fruits.unshift("파인애플", "레몬");

// ["파인애플", "레몬", "사과", "오렌지", "배"]
alert( fruits );
```

## 배열의 내부 동작 원리

배열은 특별한 종류의 객체이다. 배열 arr의 요소를 arr[0]처럼 대괄호를 사용해 접근하는 방식은 객체 문법에서 왔다. 다만 배열은 키가 숫자라는 점만 다르다

숫자형 키를 사용함으로써 배열은 객체 기본 기능 이외에도 순서가 있는 컬렉션을 제어하게 해주는 특별한 메서드를 제공한다.

이렇게 배열은 자바스크립트의 일곱 가지 원시 자료형에 해당하지 않고, 원시 자료형이 아닌 객체형에 속하기 때문에 객체처럼 동작한다

```jsx
let fruits = ["바나나"]

let arr = fruits; // 참조를 복사함(두 변수가 같은 객체를 참조)

alert( arr === fruits ); // true

arr.push("배"); // 참조를 이용해 배열을 수정합니다.

alert( fruits ); // 바나나,배 - 요소가 두 개가 되었습니다.
```

배열을 배열답게 만들어주는 것은 특수 내부 표현방식이다. 자바스크립트 엔진은 아래쪽 그림에서처럼 배열의 요소를 인접한 메모리 공간에 차례로 저장해 연산 속도를 높인다.

개발자가 배열을 '순서가 있는 자료의 컬렉션’처럼 다루지 않고 일반 객체처럼 다루면 이런 기법들이 제대로 동작하지 않습니다.

```jsx
let fruits = []; // 빈 배열을 하나 만듭니다.

fruits[99999] = 5; // 배열의 길이보다 훨씬 큰 숫자를 사용해 프로퍼티를 만듭니다.

fruits.age = 25; // 임의의 이름을 사용해 프로퍼티를 만듭니다.
```

배열은 객체이므로 예시처럼 원하는 프로퍼티를 추가해도 문제가 발생하지는 않지만 자바스크립트 엔진이 배열을 일반 객체처럼 다루게 되어 배열을 다룰 때만 적용되는 최적화 기법이 동작하지 않아 배열 특유의 이점이 사라진다

- `arr.test = 5` 같이 숫자가 아닌 값을 프로퍼티 키로 사용하는 경우
- `arr[0]`과 `arr[1000]`만 추가하고 그사이에 아무런 요소도 없는 경우
- `arr[1000]`, `arr[999]`같이 요소를 역순으로 채우는 경우

## 성능

`push`와 `pop`는 빠르지만 `shift`와 `unshift`는 느리다

## 반복문

`for`문은 배열을 순회할 때 쓰는 가장 오래된 방법이다. 순회시엔 인텍스를 사용한다

```jsx
let arr = ["사과", "오렌지", "배"];

for (let i = 0; i < arr.length; i++) {
  alert( arr[i] );
}
```

배열에 적용할 수 있는 또 다른 순회 문법으로 `for…of`가 있다

```jsx
et fruits = ["사과", "오렌지", "자두"];

// 배열 요소를 대상으로 반복 작업을 수행합니다.
for (let fruit of fruits) {
  alert( fruit );
}
```

for…of를 사용하면 현재 요소의 인덱스는 얻을 수 없고 값만 얻을 수 있다

배열은 객체형에 속하므로 `for..in`을 사용하는 것도 가능합니다.

```jsx
let arr = ["사과", "오렌지", "배"];

for (let key in arr) {
  alert( arr[key] ); // 사과, 오렌지, 배
}
```

그러나 `for…in은` 다음과 같은 특징을 지니기 떄문에 배열에 `for…in`을 사용하면 문제가 발생할 수 있기 때문에 다른 반복문을 사용하는 것이 좋다

1. `for…in` 반복문은 모든 프로퍼티를 대상으로 순회합니다. 키가 숫자가 아닌 프로퍼티도 순회 대상에 포함된다
2. `for…in` 반복문은 배열이 아니라 객체와 함께 사용할 때 최적화되어 있어서 배열에 사용하면 객체 사용하는 것 대비 10~100배 정도 느리다 

## length 프로퍼티

배열에 무언가 조작을 가하면 length 프로퍼티가 자동으로 갱신된다 length프로퍼티는 배열 내 요소의 개수가 아니라 가장 큰 인덱스에 1을 더한 값이다

따라서 배열에 요소가 하나 있고, 이 요소의 인덱스가 아주 큰 정수라면 배열의 length프로퍼티도 아주 커진다

```jsx
let fruits = [];
fruits[123] = "사과";

alert( fruits.length ); // 124
```

## new Arrray()

`new Array()` 문법을 사용해도 배열을 만들 수 있다

```jsx
let arr = new Array("사과", "배", "기타");
```

대괄호 []를 사용하면 더 짧은 문법으로 배열을 만들 수 있기 떄문에 `new Array()` 는 잘 사용되지 않는 편이다 `new Array()` 엔 다루기 까다로운 기능도 있어서 더욱더 그렇다

숫자형 인수 하나를 넣어서 `new Array`를 호출하면 배열이 만들어지는데, 이 배열엔 요소가 없는 반면 길이는 인수와 같아진다

```jsx
let arr = new Array(2); // 이렇게 하면 배열 [2]가 만들어질까요?

alert( arr[0] ); // undefined가 출력됩니다. 요소가 하나도 없는 배열이 만들어졌네요.

alert( arr.length ); // 길이는 2입니다.
```

## 다차원 배열

배열 역시 배열의 요소가 될 수 있다. 이런 배열을 가리켜 다차원 배열이라 부른다. 다차원 배열은 행렬을 저장하는 용도로 쓰인다

```jsx
let matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

alert( matrix[1][1] ); // 5, 중심에 있는 요소
```

## toString

배열 `toString`메서드가 구현되어 있어 이를 호출하면 요소를 쉴표로 구분한 문자열이 반환된다

```jsx
let arr = [1, 2, 3];

alert( arr ); // 1,2,3
alert( String(arr) === '1,2,3' ); // true

// ex
alert( [] + 1 ); // "1"
alert( [1] + 1 ); // "11"
alert( [1,2] + 1 ); // "1,21"
```

배열엔 `Symbol.toPrimitive`나 `valueOf` 메서드가 없습니다. 따라서 위 예시에선 문자열로의 형 변환이일어나 `[]`는 빈 문자열, `[1]`은 문자열 `"1"`, `[1,2]`는 문자열 `"1,2"`로 변환됩니다.